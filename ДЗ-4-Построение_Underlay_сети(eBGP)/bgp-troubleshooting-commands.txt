Диагностика iBGP на маршрутизаторах Cisco:

show ip bgp summary - эта команда показывает краткую сводку iBGP-соседей, их состояние и номер AS.

show ip bgp neighbor [IP адрес соседа] - данная команда выводит информацию о конкретном iBGP-соседе, включая состояние, количество принятых маршрутов и время последней сессии.

show ip bgp - эта команда показывает все маршруты, известные iBGP, включая те, которые получены от внешних BGP-соседей.

show ip bgp neighbors [IP адрес соседа] received-routes - данная команда выводит список маршрутов, полученных от конкретного iBGP-соседа.

show ip bgp neighbors [IP адрес соседа] advertised-routes - эта команда показывает список маршрутов, которые были отправлены конкретному iBGP-соседу.

clear ip bgp [IP адрес соседа] - данная команда очищает BGP-сессию с конкретным iBGP-соседом.

debug ip bgp - эта команда включает отладочную информацию для iBGP-сессий, которая может помочь в выявлении проблем со связью.

Эти команды могут использоваться для диагностики iBGP на маршрутизаторах Cisco и помочь в выявлении проблем со связью и обменом маршрутами между iBGP-соседями.




Диагностика iBGP на маршрутизаторах Huawei:

Просмотр информации о BGP соседях:
display bgp peer - Эта команда позволяет просмотреть список BGP соседей и их текущее состояние.

Проверка состояния соседства iBGP:
display bgp peer group <group-name> verbose - Эта команда позволяет просмотреть детальную информацию о соседстве iBGP для указанной группы соседей.

Просмотр таблицы BGP маршрутизации:
display bgp routing-table - Эта команда позволяет просмотреть таблицу маршрутизации BGP, которая содержит информацию о доступных маршрутах, полученных через BGP.

Проверка состояния BGP маршрутизации:
display bgp routing-table verbose - Эта команда позволяет просмотреть детальную информацию о состоянии BGP маршрутизации, включая количество маршрутов и текущее состояние каждого маршрута.

Просмотр информации о том, какие маршруты получены через iBGP:

display bgp vpnv4 all-peer - Эта команда позволяет просмотреть список маршрутов VPNv4, полученных через iBGP.

Проверка статуса BGP сессии:

display bgp session - Эта команда позволяет просмотреть текущее состояние всех BGP сессий на маршрутизаторе, включая iBGP.

Проверка статуса iBGP сессии:

display bgp peer <peer-address> - Эта команда позволяет просмотреть детальную информацию о состоянии iBGP сессии с указанным пиром.

Проверка таблицы маршрутизации для iBGP маршрутов
display bgp vpnv4 all-peer - Эта команда позволяет просмотреть таблицу маршрутизации для iBGP маршрутов.



as-path – перечень тех автономных систем через которые прошел анонс
• next-hop – IP адрес через который доступен данный префикс
•local preference – приоритет данного анонса, больше - лучше
• communities – «отличительная метка» конкретного анонса
• MED – аналог метрики в IGP, меньше - лучше
• originator id – RID узла анонсировавшего префикс в топологии с RR
• cluster list – RID узла выполняющего функции RR